# OneStock Putaway – Live Stock Testing Report
Aiden Bond - WFSW - 03/06/2025


## 1. Introduction
This report outlines the results of testing performed on the OneStock Putaway module’s stock movement functionality. The objective was to verify that stock quantities are updated correctly and appropriate stock movement (SMOV) records are created, while ensuring the UI responds accurately and clearly throughout.

## 2. Test Setup
Test SKUs

<table>
  <tr>
   <td><strong>SKU</strong>
   </td>
   <td><strong>Default Bin</strong>
   </td>
   <td><strong>Starting Quantity</strong>
   </td>
  </tr>
  <tr>
   <td>TESTOSPA1
   </td>
   <td>OSPABIN1
   </td>
   <td>36
   </td>
  </tr>
  <tr>
   <td>TESTOSPA2
   </td>
   <td>OSPABIN2
   </td>
   <td>44
   </td>
  </tr>
  <tr>
   <td>TESTOSPA3
   </td>
   <td>OSPABIN3
   </td>
   <td>6
   </td>
  </tr>
</table>


		
## 3. Test Scenarios

### Test 1 – Uniform Receipts

Action: Receipt of 10 units for each SKU
Expected Quantities:
* TESTOSPA1: 46
* TESTOSPA2: 54
* TESTOSPA3: 16

### Test 2 – Varied Receipts

Action: Receipt of 4, 6, and 12 units respectively for each SKU
Expected Quantities:
* TESTOSPA1: 50
* TESTOSPA2: 60
* TESTOSPA3: 28

### Test 3 – Targeted Receipt Post-Fixes

* Action: Receipt of 1 unit each of TESTOSPA2 and TESTOSPA1
* Purpose: Verify final adjustments to UI and logic

## 4. Test Results and Actions

### Test 1 – Attempt 1

Results:
* Stored procedure errored:
  * “Stock movements attempted for OSPA0283, TESTOSPA3... update failed - Store/Bin does not exist”
* Error repeated for all lines (consistent handling)
* Root cause: C# parameter ordering mismatch with SQL procedure

Actions Taken:
* Reordered C# method parameters to align with SQL procedure

---

### Test 1 – Attempt 2

Results:
* Quantities updated correctly
* Bin assignments accurate
* SMOV record created with incorrect transaction type: UPLISS instead of UPLREC
* UI screen updated; however, data grid truncated success/error messages

Actions Taken:
* Updated SQL stored procedure to use correct transaction type UPLREC
* Modified data grid to auto-size columns based on content, improving visibility

---

### Test 2

Results:
* Quantities and bins updated correctly
* SMOV record used correct transaction type
* Data grid readability improved after putaway, but degraded during other data display modes

Actions Taken:
* Enhanced data grid behavior:
  * Set AutoSizeMode = AllCells after putaway completion
  * Set AutoSizeMode = Fill for other form states
* Planned follow-up test to validate new behavior

---

### Test 3

Results:
* Quantities and bins updated as expected
* SMOV record created correctly
* Data grid readability improved both before and after putaway completion

---

![OneStock-Logo](https://github.com/Whistl-Fulfilment-South-West/OneStock/blob/master/OSPA_MOVE_ScreenShot.JPG)

The annotated screenshot provides database-level evidence of the stock movement records generated by the OneStock Putaway module.
From the screenshot:
* Test 1 shows uniform quantity updates with the incorrect transaction type (UPLISS) initially recorded.
* Test 2 reflects varied quantity updates and the correct transaction type (UPLREC) after fixes were applied.
* The QTY On Hand column confirms that the expected quantities are accurately reflected at the stock locations following each movement.

This data was gathered using the following SQL query:

```sql
SELECT
			RTRIM(store) as [Store]
			,RTRIM(bin) as [Bin]
			,RTRIM(part) as [Part]
			,CAST(qty as float) as [QTY]
			,RTRIM(trans) as [Trans Type]
			,CAST(qty_oh as float) as [QTY On Hand]
			,last_updated as [Date Time]
FROM
			smov 
WHERE 
			part IN ('TESTOSPA1','TESTOSPA2','TESTOSPA3')
ORDER BY 
			last_updated DESC
```



## 5. Conclusion
Testing of the OneStock Putaway module in a live environment confirms that:
* Stock quantities are updated accurately based on receipt actions
* SMOV records are reliably created with correct transaction types
* The UI now appropriately reflects both successes and errors, with improved data grid behavior depending on context
  
With all intended functionality working as expected and no critical issues remaining, the OneStock Putaway stock movement feature is considered ready for live deployment.

[Code Changes](https://github.com/Whistl-Fulfilment-South-West/OneStock/commit/021810c124bf04a4b191ebb692b77ed93bb8c38d#r158953556)

